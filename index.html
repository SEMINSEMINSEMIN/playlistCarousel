<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="style.css">
    <title></title>
</head>
<body>
    <article id="app">
        <h2 class="text-hidden">플레이 리스트</h2>
        <ul class="list-item">
            <li><div id="player0"></div></li>
            <li><div id="player1"></div></li>
            <li><div id="player2"></div></li>
            <li><div id="player3"></div></li>
            <li><div id="player4"></div></li>
            <li><div id="player5"></div></li>
            <li><div id="player6"></div></li>
        </ul>
    </article>
</body>
<script>
    // API 불러오기
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 비디오 데이터
    function Players(playerName, videoId, $startSeconds, $endSeconds){
        this.playerName = playerName;
        this.$videoId = videoId;
        this.$startSeconds = $startSeconds;
        this.$endSeconds = $endSeconds;
    }

    const videoInfoData = [
        new Players('player0', 'Aq_gsctWHtQ', 55, 85),
        new Players('player1', 'PfpERIQXIrk', 74, 102),
        new Players('player2', 'vFuU4rIZZ30', 44, 60),
        new Players('player3', 'zC8RrOA0spo', 65, 104),
        new Players('player4', 'hoknJbAsOZY', 65, 87),
        new Players('player5', 'ty8fr7vmedg', 72, 101),
        new Players('player6', 'DJ4Zda11iSo', 52, 100)
    ];

    // 비디오 삽입
    const playerList = [];

    function stopVideo() {
        player.stopVideo();
      }

    function onYouTubeIframeAPIReady(){
        for (let i = 0; i < videoInfoData.length; i++){
            const nowVideo = videoInfoData[i];
            let done = false;
            playerList.push(new YT.Player(nowVideo.playerName, {
                videoId: nowVideo.$videoId,
                width: '400',
                height: '360',
                playerVars: {'autoplay': 0},
                events: {
                    'onStateChange': function onStateChange(event){
                        if (event.data == 1 && !done){
                            event.target.seekTo(nowVideo.$startSeconds);
                            done = true;
                        }
                    }
                }
            }))
        }
        // 자동재생 문제
        const iframes = document.querySelectorAll('iframe');
        for (let iframe of iframes) {
            iframe.setAttribute('allow', "accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture");
        }
    }
</script>
</html>