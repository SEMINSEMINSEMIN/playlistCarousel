<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="style.css">
    <title></title>
</head>
<body>
    <article id="app">
        <h2 class="text-hidden">플레이 리스트</h2>
        <ul class="list-item">
            <li><div id="player0"></div></li>
            <li><div id="player1"></div></li>
            <li><div id="player2"></div></li>
            <li><div id="player3"></div></li>
            <li><div id="player4"></div></li>
            <li><div id="player5"></div></li>
            <li><div id="player6"></div></li>
        </ul>
    </article>
</body>
<script>
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    const center = document.querySelector('.list-item');
    const items = document.querySelectorAll('.list-item li');
    const angle = 360 / items.length;
    let currAngle = 0;

    document.addEventListener('click', function (event) {
        if (window.innerWidth / 2 < event.clientX) {
            currAngle -= angle;
            player0.pauseVideo();
            player1.pauseVideo();
            player2.pauseVideo();
            player3.pauseVideo();
            player4.pauseVideo();
            player5.pauseVideo();
            player6.pauseVideo();
        } else {
            currAngle += angle;
            player0.pauseVideo();
            player1.pauseVideo();
            player2.pauseVideo();
            player3.pauseVideo();
            player4.pauseVideo();
            player5.pauseVideo();
            player6.pauseVideo();
        }

        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
    })

    var player0, player1, player2, player3, player4, player5, player6;
    function onYouTubeIframeAPIReady(){
        player0 = new YT.Player('player0', {
            videoId: 'Aq_gsctWHtQ',
            width: '400',
            height: '360',
            playerVars: { 'autoplay': 0, 'controls': 1 },
            events: {
                'onReady': function onReady(event){
                    event.target.loadVideoById({
                            videoId: 'Aq_gsctWHtQ',
                            startSeconds: 55,
                            endSeconds: 85,
                            suggestedQuality: 'small'
                        })
                },

                'onStateChange': function onStateChange(event){
                    if (event.data == 0){
                        // event.target.seekTo(0);
                        // event.target.stopVideo();
                        currAngle -= angle;
                        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
                        event.target.seekTo(86);
                        event.target.pauseVideo();
                    } else if (event.data == 1 && !done){
                        event.target.loadVideoById({
                            videoId: 'Aq_gsctWHtQ',
                            startSeconds: 55,
                            endSeconds: 85,
                            suggestedQuality: 'small'
                        })
                    }
                }
            }
        });

        player1 = new YT.Player('player1', {
            videoId: 'PfpERIQXIrk',
            width: '400',
            height: '360',
            playerVars: { 'autoplay': 0, 'controls': 1 },
            events: {
                'onReady': function onReady(event){
                    event.target.loadVideoById({
                        videoId: 'PfpERIQXIrk',
                        startSeconds: 74,
                        endSeconds: 102,
                        suggestedQuality: 'small'
                    })
                    // event.target.pauseVideo();
                },

                'onStateChange': function onStateChange(event){
                    if (event.data == 0){
                        currAngle -= angle;
                        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
                        event.target.seekTo(103);
                        event.target.pauseVideo();
                    }
                }
            }
        });

        player2 = new YT.Player('player2', {
            video: 'vFuU4rIZZ30',
            width: '400',
            height: '360',
            playerVars: { 'autoplay': 0, 'controls': 1 },
            events: {
                'onReady': function onReady(event){
                    event.target.loadVideoById({
                        videoId: 'vFuU4rIZZ30',
                        startSeconds: 44,
                        endSeconds: 60,
                        suggestedQuality: 'small'
                    })
                    // event.target.pauseVideo();
                },

                'onStateChange': function onStateChange(event){
                    if (event.data == 0){
                        // event.target.seekTo(0);
                        // event.target.stopVideo();
                        currAngle -= angle;
                        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
                        event.target.seekTo(61);
                        event.target.pauseVideo();
                    }
                }
            }
            });

        player3 = new YT.Player('player3', {
            video: 'zC8RrOA0spo',
            width: '400',
            height: '360',
            playerVars: { 'autoplay': 0, 'controls': 1 },
            events: {
                'onReady': function onReady(event){
                    event.target.loadVideoById({
                        videoId: 'zC8RrOA0spo',
                        startSeconds: 65,
                        endSeconds: 104,
                        suggestedQuality: 'small'
                    })
                    // event.target.pauseVideo();
                }, 

                'onStateChange': function onStateChange(event){
                    if (event.data == 0){
                        // event.target.seekTo(0);
                        currAngle -= angle;
                        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
                        event.target.seekTo(105);
                        event.target.pauseVideo();
                    }
                }
            }
        });

        player4 = new YT.Player('player4', {
            video: 'hoknJbAsOZY',
            width: '400',
            height: '360',
            playerVars: { 'autoplay': 0, 'controls': 1 },
            events: {
                'onReady': function onReady(event){
                    event.target.loadVideoById({
                        videoId: 'hoknJbAsOZY',
                        startSeconds: 65,
                        endSeconds: 87,
                        suggestedQuality: 'hd720'
                    })
                    // event.target.pauseVideo();
                }, 

                'onStateChange': function onStateChange(event){
                    if (event.data == 0){
                        currAngle -= angle;
                        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
                        event.target.seekTo(88);
                        event.target.pauseVideo();
                    }
                }
            }
        });

        player5 = new YT.Player('player5', {
            video: 'ty8fr7vmedg',
            width: '400',
            height: '360',
            playerVars: { 'autoplay': 0, 'controls': 1 },
            events: {
                'onReady': function onReady(event){
                    event.target.loadVideoById({
                        videoId: 'ty8fr7vmedg',
                        startSeconds: 72,
                        endSeconds: 101,
                        suggestedQuality: 'hd720'
                    })
                }, 

                'onStateChange': function onStateChange(event){
                    if (event.data == 0){
                        currAngle -= angle;
                        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
                        event.target.seekTo(102);
                        event.target.pauseVideo();
                    }
                }
            }
        });

        player6 = new YT.Player('player6', {
            video: 'DJ4Zda11iSo',
            width: '400',
            height: '360',
            playerVars: { 'autoplay': 0, 'controls': 1 },
            events: {
                'onReady': function onReady(event){
                    event.target.loadVideoById({
                        videoId: 'DJ4Zda11iSo',
                        startSeconds: 52,
                        endSeconds: 100,
                        suggestedQuality: 'hd720'
                    })
                    // event.target.pauseVideo();
                }, 

                'onStateChange': function onStateChange(event){
                    if (event.data == 0){
                        // event.target.seekTo(0);
                        currAngle -= angle;
                        center.style.transform = `translate(-50%, -50%) rotateY(${currAngle}deg)`;
                        event.target.seekTo(101);
                        event.target.pauseVideo();
                    }
                }
            }
        });
    }
</script>
</html>