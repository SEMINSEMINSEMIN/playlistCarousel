<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>
<body>
    <!-- 동영상 로드하고 6초 동안 재생 후 다음 재생 중지하는 내장 플레이어 -->
    <!-- 1. 동영상 플레이어를 배치할 페이지의 위치 식별 -->
    <div id="player"></div>
    <div id="player1"></div>
    <script>
        /*
        /// 2. IFrame Player API JavaScript 코드 로드, 비동기식으로
        */
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";

        var firstScriptTag = document.getElementsByTagName('script')[0];
        // firstScriptTag.parentNode: body
        // parentElement.insertBefore(target, location); target요소를 parentElement의 자식인 location 위치 앞으로 이동합니다.
        // tag를 body의 자식인 script 위치 앞으로 이동
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        /*
        /// 3. onYouTubeIframeAPIReady 함수는 플레이어 API 코드가 다운로드되는 즉시 실행됩니다. 코드에서 이 부분이 삽입한 동영상 플레이어를 참조하는 전역 변수 player를 정의하며 함수가 동영상 플레이어 개체를 구성합니다.
        */
        var player, player1;
        function onYouTubeIframeAPIReady(){
            player = new YT.Player('player', {
                height: '360',
                width: '640',
                videoId: 'Aq_gsctWHtQ',
                events: {
                    // 'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            })
            player1 = new YT.Player('player1', {
                height: '360',
                width: '640',
                videoId: 't8P-zdkoeJA',
                events: {
                    // 'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            })
        }
        // 3.1. 첫 번째 매개변수는 API가 플레이어가 포함된 <iframe> 태그를 삽입할 HTML 요소의 id 또는 DOM 요소를 지정합니다.
        // 3.2. 두 번째 매개변수는 플레이어 옵션을 지정하는 개체
        //// 3.2.1. width: 너비, 기본값은 640
        //// 3.2.2. height: 높이, 기본값은 360
        //// 3.2.3. playerVars: 플레이어를 맞춤설정하는 데 사용할 수 있는 플레이어 매개변수를 식별
        //// 3.2.4. events: 개체의 속성은 API가 실행하는 이벤트 및 해당 이벤트 발생 시 API가 호출하는 함수(이벤트 리스너)를 식별합니다. 예를 들어 생성자는 onReady 이벤트 실행 시 onPlayerReady 함수가 실행되고 onStateChange 이벤트 실행 시 onPlayerStateChange 함수가 실행됨을 나타냅니다.

        // 4. onReady 이벤트가 실행될 때 onPlayerReady 함수가 실행됩니다. 이 예에서 함수는 동영상 플레이어가 준비되면 재생을 시작해야 함을 나타냅니다.
        // function onPlayerReady(event) {
        //     event.target.playVideo();
        // }

        // 5. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.

        player1.onStateChange


        var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
            player.loadVideoById({
                videoId: 'Aq_gsctWHtQ',
                startSeconds: 55,
                endSeconds: 85
            })
            done = true;
        }
        if (event.data == YT.PlayerState.PLAYING && !done) {
            player.loadVideoById({
                videoId: 'Aq_gsctWHtQ',
                startSeconds: 55,
                endSeconds: 85
            })
            done = true;
        }
      }

    //   function stopVideo() {
    //     player.stopVideo();
    //   }

        // function onPlayerStateChange(event) {
        //     const playerState = player.getPlayerState();
        //     if (event.data == playerState && !done) {
        //         player.loadVideoById({
        //             videoId: 'Aq_gsctWHtQ',
        //             startSeconds: 55,
        //             endSeconds: 85
        //         })
        //     }
        // }

        // function onPlayerStateChange1(event) {
        //     if (event.data == YT.PlayerState.PLAYING) {
        //         player1.loadVideoById({
        //             videoId: 't8P-zdkoeJA',
        //             startSeconds: 55,
        //             endSeconds: 83
        //         })
        //     }
        // }
        // function highLight() {
        //     player.seekTo(12000)
        // }

        // function stopVideo() {
        //     player.stopVideo();
        // }
    </script>
</body>
</html>